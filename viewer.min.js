!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["viewer.min"]=e():t["viewer.min"]=e()}(this,function(){return function(t){function e(i){if(s[i])return s[i].exports;var n=s[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var s={};return e.m=t,e.c=s,e.i=function(t){return t},e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,s){"use strict";e.a={distance:function(t,e){var s,i;return s=t[0]-e[0],i=t[1]-e[1],Math.sqrt(s*s+i*i)},scale:function(t,e){var s,i;return t.length>1&&e.length>1?(s=this.distance(t[0],t[1]),i=this.distance(e[0],e[1]),2*(s-i)/(s+i)):0},translation:function(t,e){return 0===t.length||0===e.length?[0,0]:t.length>=2&&e.length>=2?this.translation([this.barycentre(t)],[this.barycentre(e)]):[e[0][0]-t[0][0],e[0][1]-t[0][1]]},barycentre:function(t){var e,s,i,n,r;for(n=0,r=0,e=0,s=t.length;e<s;e++)i=t[e],n+=i[0],r+=i[1];return[n/t.length,r/t.length]}}},function(t,e,s){"use strict";var i;i=function(){function t(t,e){this.element=t,this.viewer=e,this.sizes=[1*this.element.clientWidth,1*this.element.clientHeight],this.on_down=function(t){return function(e){return t.send("down",e)}}(this),this.on_up=function(t){return function(e){if(!t.event_in_scope(e))return t.send("up",e)}}(this),this.on_move=function(t){return function(e){return t.send("move",e)}}(this),this.add_listener("touchstart mousedown",this.on_down),this.add_listener("touchmove mousemove",this.on_move),this.add_listener("touchend mouseup mouseout touchcancel",this.on_up)}return t.prototype.destroy=function(){return this.remove_listener("touchstart mousedown",this.on_down),this.remove_listener("touchmove mousemove",this.on_move),this.remove_listener("touchend mouseup mouseout touchcancel",this.on_up)},t.prototype.add_listener=function(t,e){var s,i,n,r,o;for(r=t.split(" "),o=[],i=0,n=r.length;i<n;i++)s=r[i],o.push(this.element.addEventListener(s,e));return o},t.prototype.remove_listener=function(t,e){var s,i,n,r,o;for(r=t.split(" "),o=[],i=0,n=r.length;i<n;i++)s=r[i],o.push(this.element.addEventListener(s,e));return o},t.prototype.event_in_scope=function(t){var e;if(e=t.relatedTarget,null===t.relatedTarget)return!1;for(;e;){if(e===this.element)return!0;e=e.parentElement}return!1},t.prototype.send=function(t,e){var s;return e.preventDefault(),e.stopPropagation(),s=this.extract_touches(e),this.viewer[t](s)},t.prototype.extract_touches=function(t){var e,s,i,n,r,o,h;if(h=[],null!=t.touches){if(0===t.touches.length)return this._touch_cache;for(h=[],e=s=0,r=t.touches.length;0<=r?s<r:s>r;e=0<=r?++s:--s)o=t.touches[e],h.push([o.pageX,o.pageY])}else h.push([t.pageX,t.pageY]);for(e=i=0,n=h.length;i<n;e=++i)o=h[e],h[e]=[o[0]/this.sizes[0]*100,o[1]/this.sizes[1]*100];return t.shiftKey&&h.push([45,45]),this._touch_cache=h,this._touch_cache},t}(),e.a=i},function(t,e){},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=s(2),r=(s.n(n),s(1)),o=s(0);i=function(){function t(t){var e,s,i,n;for(this._config=t,this.listener=new r.a(this._config.elem,this),this.element=this._config.elem,this.drag=!1,this.destroyed=!1,this.touches=[],this.last_touches=[],this.translation=[0,0],this.scale_center=[50,50],this.scale=1,this.viewer_content=this.element.getElementsByClassName("viewer-content")[0],this.viewer_background=this.element.getElementsByClassName("viewer-background")[0],this.index=0,this.items=this.element.getElementsByClassName("viewer-container"),this.items=[this.items[0],this.items[1],this.items[2]],n=this.items,s=0,i=n.length;s<i;s++)e=n[s],e.style.display="";this.items[0].style.transform="translate(-100%) scale(1)",this.items[2].style.transform="translate(100%) scale(1)",this.loop_callback=function(t){return function(){return t.tick()}}(this),requestAnimationFrame(this.loop_callback)}return t.prototype.destroy=function(){if(!this.destroyed)return this.destroyed=!0,this.listener.destroy(),this.element.remove()},t.prototype.tick=function(t){var e;if(!this.destroyed)return this.drag&&(e=o.a.translation(this.touches,this.last_touches),this.scale+=o.a.scale(this.touches,this.last_touches),1===this.scale?this.translation=[this.translation[0]-e[0],this.translation[1]-e[1]]:(this.translation=[0,0],this.scale_center=[this.scale_center[0]+e[0]/this.scale,this.scale_center[1]+e[1]/this.scale]),this.update_position(),this.viewer_background.style.opacity=Math.max(0,1-Math.abs(this.translation[1]/100))),this.last_touches=this.touches,requestAnimationFrame(this.loop_callback)},t.prototype.update_position=function(){var t;return t=-100*this.index+this.translation[0],this.scale<.2&&(this.scale=.2),this.viewer_content.style.transformOrigin=this.scale_center[0]+100*this.index+"% "+this.scale_center[1]+"% 0",this.viewer_content.style.transform="translate("+t+"%, "+this.translation[1]+"%) scale("+this.scale+")"},t.prototype.down=function(t){return this.touches=t,this.element.classList.remove("viewer-annimate"),this.element.classList.remove("viewer-annimate-origin"),this.last_touches=this.touches,this.drag=!0,this.last_down=Date.now()},t.prototype.move=function(t){this.touches=t},t.prototype.up=function(t){if(this.touches=t,this.drag)return this.drag=!1,this.last_down&&Date.now()-this.last_down<100?(this.scale>1?(this.scale=1,this.translation=[0,0]):(this.scale=5,this.scale_center=[this.touches[0][0],this.touches[0][1]]),this.element.classList.add("viewer-annimate"),void this.update_position()):this.scale<.1?this.destroy():this.scale>1?(this.scale_center[0]>100&&(this.scale_center[0]=100),this.scale_center[0]<0&&(this.scale_center[0]=0),this.scale_center[1]>100&&(this.scale_center[1]=100),this.scale_center[1]<0&&(this.scale_center[1]=0),this.element.classList.add("viewer-annimate"),this.element.classList.add("viewer-annimate-origin"),this.update_position(),this.viewer_background.style.opacity=1):Math.abs(this.translation[1])>60?this.destroy():Math.abs(this.translation[0])>20?this.translation[0]<0?this.set_index(this.index+1):this.set_index(this.index-1):this.set_index(this.index)},t.prototype.set_index=function(t){var e,s,i,n,r,o,h,a,c;if(this.scale=1,this.scale_center=[50,50],this.translation=[0,0],this.element.classList.add("viewer-annimate"),i=t-this.index,s=[],0!==i)switch(i){case 1:s.push({elem:this.items[0],index:this.index+2});break;case-1:s.push({elem:this.items[2],index:this.index-2});break;default:s.push({elem:this.items[0],index:t-1}),s.push({elem:this.items[1],index:t}),s.push({elem:this.items[2],index:t+1})}for(o=0,h=s.length;o<h;o++)e=s[o],e.elem.style.transform="translate("+100*e.index+"%) scale(1)";this.index=t,this._rotate_items(i),a=[],c=this.items;for(n in c)r=c[n],a.push({elem:r,index:this.index+this.items.indexOf(r)-1});return Object.keys(s).length>0&&null!=this._config.callback&&this._config.callback(s,a),this.drag=!1,this.viewer_content.style.transform="translate("+100*-this.index+"%, 0) scale(1)",!0},t.prototype._rotate_items=function(t){if(0!==t)return this.items[1].style.zIndex=0,t>0?(this.items.push(this.items.shift()),this._rotate_items(t-1)):(this.items.unshift(this.items.pop()),this._rotate_items(t+1)),this.items[1].style.zIndex=1},t.prototype.next=function(){return this.set_index(this.index+1)},t.prototype.previous=function(){return this.set_index(this.index-1)},t}(),e.default=i}])});